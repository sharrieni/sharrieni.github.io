<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>meow</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #fdf6f9;
    font-family: 'Inter', sans-serif;
    overflow: hidden;
  }

  .game-container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .grid {
    width: calc(5*60px + 4*4px);
    height: calc(5*60px + 4*4px);
    display: inline-grid;
    grid-template-columns: repeat(5, 60px);
    grid-template-rows: repeat(5, 60px);
    gap: 4px;
    position: relative;
    background: #ffe6ec;
    border-radius: 12px;
  }

  .tile {
    width: 60px;
    height: 60px;
    background: #ffd9e0;
    border-radius: 8px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    font-size: 1.5rem;
    user-select: none;
  }

  .tile:hover {
    background: #ffb8d2;
  }

  .character {
    position: absolute;
    font-size: 1.5rem;
    pointer-events: none;
    transition: top 0.3s, left 0.3s;
    z-index: 2;
  }

  .message-box {
    margin-top: 20px;
    font-size: 1.2rem;
    color: #d66a87;
    text-align: center;
    opacity: 0;
    transition: opacity 0.5s;
  }

  .message-box.show {
    opacity: 1;
  }

  .snowflake {
    position: absolute;
    top: -10px;
    color: #ffb8d2cc;
    font-size: 1rem;
    user-select: none;
    animation: fall linear infinite;
    opacity: 0.9;
  }

  @keyframes fall {
    to { transform: translateY(110vh) rotate(360deg); }
  }
</style>
</head>
<body>

<div class="game-container">
  <div class="grid" id="grid"></div>
  <div class="message-box" id="message">i hate coding, but i love you <3</div>
</div>             

<script>
  const grid = document.getElementById("grid");
  const message = document.getElementById("message");

  const rows = 5;
  const cols = 5;
  const tileSize = 60;
  const gap = 4;

  const levels = [
    { pawPos: { row: 4, col: 4 }, message: "i hate coding, but i love you <3" },
    { pawPos: { row: 2, col: 1 }, message: "always my favorite person :)" },
    { pawPos: { row: 0, col: 3 }, message: "careful w my tv tho" }
  ];

  let currentLevel = 0;
  let charPos = { row: 0, col: 0 };

  const character = document.createElement("div");
  character.className = "character";
  character.innerHTML = "ðŸˆâ€â¬›";
  grid.appendChild(character);

  const tiles = [];
  for (let r = 0; r < rows; r++) {
    tiles[r] = [];
    for (let c = 0; c < cols; c++) {
      const tile = document.createElement("div");
      tile.className = "tile";
      tile.dataset.row = r;
      tile.dataset.col = c;
      tile.addEventListener("click", () => tryMove(r, c));
      grid.appendChild(tile);
      tiles[r][c] = tile;
    }
  }

  function tryMove(row, col) {
    const rowDiff = Math.abs(row - charPos.row);
    const colDiff = Math.abs(col - charPos.col);

    if ((rowDiff === 1 && colDiff === 0) || (rowDiff === 0 && colDiff === 1)) {
      moveCharacter(row, col);
    }
  }

  function moveCharacter(row, col) {
    charPos = { row, col };
    const tile = tiles[row][col];

    const top = tile.offsetTop + tile.offsetHeight/2 - character.offsetHeight/2;
    const left = tile.offsetLeft + tile.offsetWidth/2 - character.offsetWidth/2;
    character.style.top = top + "px";
    character.style.left = left + "px";

    const level = levels[currentLevel];
    if (row === level.pawPos.row && col === level.pawPos.col) {
      message.innerHTML = level.message;
      message.classList.add("show");

      setTimeout(() => {
        message.classList.remove("show");
        currentLevel++;
        if (currentLevel < levels.length) {
          setupLevel(currentLevel);
        } else {
          message.innerHTML = "levels completed :)";
          message.classList.add("show");
        }
      }, 2500);
    }
  }

  function setupLevel(levelIndex) {
    const level = levels[levelIndex];

    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        if (tiles[r][c].innerHTML === "ðŸ¾") tiles[r][c].innerHTML = "";
      }
    }

    const { row, col } = level.pawPos;
    tiles[row][col].innerHTML = "ðŸ¾";

    message.classList.remove("show");

    charPos = { row: 0, col: 0 };
    moveCharacter(charPos.row, charPos.col);
  }

  document.addEventListener("keydown", (e) => {
    let newRow = charPos.row;
    let newCol = charPos.col;

    switch (e.key) {
      case "ArrowUp":
        newRow = Math.max(0, charPos.row - 1);
        break;
      case "ArrowDown":
        newRow = Math.min(rows - 1, charPos.row + 1);
        break;
      case "ArrowLeft":
        newCol = Math.max(0, charPos.col - 1);
        break;
      case "ArrowRight":
        newCol = Math.min(cols - 1, charPos.col + 1);
        break;
      default:
        return;
    }

    moveCharacter(newRow, newCol);
  });

  setupLevel(currentLevel);

  const snowflakeCount = 40;
  for (let i = 0; i < snowflakeCount; i++) {
    const flake = document.createElement("div");
    flake.className = "snowflake";
    flake.innerHTML = "â„";
    flake.style.left = Math.random() * 100 + "vw";
    flake.style.animationDuration = (4 + Math.random() * 6) + "s";
    flake.style.fontSize = (12 + Math.random() * 10) + "px";
    flake.style.opacity = 0.6 + Math.random() * 0.4;
    document.body.appendChild(flake);
  }
</script>

</body>
</html>
